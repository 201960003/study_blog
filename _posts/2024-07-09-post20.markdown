---
layout: post
title:  canvas ì— mouseë¡œ ê·¸ë¦¼ ê·¸ë¦¬ê¸° (1)
date:   2024-07-09 +0900
categories: [HTML, Javascript]
img_path: /assets/images/post20/
---

## 1ï¸âƒ£ htmlì— canvas ê·¸ë¦¬ê¸°
  CSS
  ```css
    canvas {
        border: 1px solid #000; /* ìº”ë²„ìŠ¤ íƒœê·¸ì— í…Œë‘ë¦¬ */
    }
  ```
  css ì—ì„œ canvas í¬ê¸° ì•ˆí•˜ëŠ” ì´ìœ  : canvas ìš”ì†Œì˜ widthì™€ height ì†ì„±ì´ ë‚´ë¶€ì ìœ¼ë¡œ ê·¸ë ¤ì§€ëŠ” ê·¸ë˜í”½ì˜ í•´ìƒë„ë¥¼ ê²°ì •í•˜ê¸° ë•Œë¬¸ì—  HTML ì†ì„±ìœ¼ë¡œ ì§€ì •í•´ì•¼ë¨

  HTML
  ```html 
    <canvas id="canvas" width="500" height="500"></canvas> <!-- í¬ê¸°ëŠ” 500 : 500 ìœ¼ë¡œ ì§€ì • -->
  ```

  Javascript
  ```javascript  
    var canvas = document.getElementById("canvas"); // canvas íƒœê·¸
    var context = canvas.getContext("2d"); // canvas íƒœê·¸ì˜ context ê°ì²´ ìƒì„±
  ```

## 2ï¸âƒ£ ì„  ê·¸ë¦¬ê¸°

 Javascript
  ```javascript
    var lastY = 0; // ë§ˆì§€ë§‰ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ y ê°’
    var isDrawing = false; // ê·¸ë¦¬ê¸° ìƒíƒœ, false : ì•ˆê·¸ë¦¬ê¸°
    var strokeStyle = 'black';  // ê¸°ë³¸ ì„  ìƒ‰ìƒ

     function handleMouseDown(event) {
        // ë§ˆìš°ìŠ¤ í´ë¦­í–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
        isDrawing = true;
        [lastX, lastY] = [event.offsetX, event.offsetY];
        // í˜„ì¬ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì¸ [event.offsetX, event.offsetY] ë¥¼ ê°ê° lastX, lastY ì— ì €ì¥
      }

      function handleMouseMove(event) {
        // ë§ˆìš°ìŠ¤ê°€ canvas íƒœê·¸ë‚´ì—ì„œ ì›€ì§ì˜€ì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜

        if (!isDrawing) return;  // isDrawingì´ falseì¼ ë•ŒëŠ” returnìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì¢…ë£Œ

        // ë§ˆìš°ìŠ¤ê°€ ì›€ì§ì¼ ë•Œ isDrawingì´ trueì´ë©´ í˜„ì¬ ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜´

        const currentX = event.offsetX;
        const currentY = event.offsetY;

        context.beginPath(); // contextì˜ ìƒˆë¡œìš´ ê²½ë¡œë¥¼ ì‹œì‘
        context.moveTo(lastX, lastY); // ë§ˆì§€ë§‰ ë§ˆìš°ìŠ¤ ìœ„ì¹˜
        context.lineTo(currentX, currentY); // moveToë¡œ ì§€ì •í•œ ì´ì „ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì—ì„œ í˜„ì¬ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ê¹Œì§€ ì„  ê·¸ë¦¬ê¸°
        context.closePath(); // contextì˜ ê²½ë¡œë¥¼ ì¢…ë£Œ
        context.stroke(); // í™”ë©´ì— ì„  ê·¸ë¦¬ê¸° í•¨ìˆ˜

        [lastX, lastY] = [currentX, currentY]; // í˜„ì¬ ìœ„ì¹˜ë¥¼ ì €ì¥
      }

      function handleMouseUp() {
        // ë§ˆìš°ìŠ¤ í´ë¦­ í•´ì œí–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
        isDrawing = false;
      }

      function handleMouseLeave() {
          // ë§ˆìš°ìŠ¤ê°€ canvas íƒœê·¸ë¥¼ ë²—ì–´ë‚¬ì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
          isDrawing = false;
      }

      // ë¦¬ìŠ¤ë„ˆ ì‹¤í–‰
      canvas.addEventListener('mousedown', handleMouseDown);
      canvas.addEventListener('mousemove', handleMouseMove);
      canvas.addEventListener('mouseup', handleMouseUp);
      canvas.addEventListener('mouseleave', handleMouseLeave);

  ```

## 3ï¸âƒ£ ìƒ‰ìƒë³€ê²½ ë²„íŠ¼
  CSS
  ```css
    .color-picker {
      display: flex;
      margin-bottom: 10px;
    }
    .color-button {
      position: relative;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      margin: 5px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }  /* ìƒ‰ìƒ ë³€ê²½ ë²„íŠ¼ì´ ì›í˜•ìœ¼ë¡œ ë§Œë“¤ê³  ì²´í¬í‘œì‹œë¥¼ ìƒ‰ìƒ ë³€ê²½ ë²„íŠ¼ì˜ ì • ê°€ìš´ë°ì— ìœ„ì¹˜í•˜ê²Œ í•¨ */ 
    .color-button span {
      display: none;
      color: white;
      font-size: 20px;
    }  /* .selected í´ë˜ìŠ¤ê°€ í¬í•¨ ì•ˆë  ë•Œ ì²´í¬í‘œì‹œ ì•ˆë³´ì´ê²Œ */ 
    .color-button.selected span {
        display: block; 
    }  /* .selected í´ë˜ìŠ¤ê°€ í¬í•¨ ë  ë•Œ ì²´í¬í‘œì‹œ ë³´ì´ê²Œ */
    .black { background-color: black; color: white; } /* ê° ì›í˜• ë²„íŠ¼ë§ˆë‹¤ ë°°ê²½ìƒ‰ ì§€ì • colorëŠ” ë§¨ ì²˜ìŒ spaníƒœê·¸ì˜ ì²´í¬í‘œì‹œ ìƒ‰ìƒ */
    .red { background-color: red; }
    .orange { background-color: orange; }
    .yellow { background-color: yellow; }
    .green { background-color: green; }
    .blue { background-color: blue; }
    .indigo { background-color: indigo; }
    .violet { background-color: violet; }
  ```

  HTML
  ```html 
    <div class="color-picker">
        <div class="color-button black selected" data-color="black"><span>&#10003;</span></div>
        <div class="color-button red" data-color="red"><span>&#10003;</span></div>
        <div class="color-button orange" data-color="orange"><span>&#10003;</span></div>
        <div class="color-button yellow" data-color="yellow"><span>&#10003;</span></div>
        <div class="color-button green" data-color="green"><span>&#10003;</span></div>
        <div class="color-button blue" data-color="blue"><span>&#10003;</span></div>
        <div class="color-button indigo" data-color="indigo"><span>&#10003;</span></div>
        <div class="color-button violet" data-color="violet"><span>&#10003;</span></div>
    </div>
  ```

  Javascript
  ```javascript 
    // ìƒ‰ìƒ ê·¸ë¦¬ê¸° í•  ë•Œ ë‚˜ì˜¨ ì•„ë˜ì˜ í•¨ìˆ˜ì—ì„œ 
    function handleMouseMove(event) {
        // ... ë‚˜ë¨¸ì§€ ë™ì¼
        context.lineTo(currentX, currentY);
        context.strokeStyle = strokeStyle; // ì§€ì •í•œ ì„  ìƒ‰ìƒ

        // ... ë‚˜ë¨¸ì§€ ë™ì¼
    }


    // ìƒ‰ìƒ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    document.querySelectorAll('.color-button').forEach(button => {
      button.addEventListener('click', function() {
        document.querySelectorAll('.color-button').forEach(btn => btn.classList.remove('selected')); // ê¸°ì¡´ì— ì²´í¬ë˜ì—ˆë˜ ìƒ‰ìƒì€ í•´ì œ
        this.classList.add('selected'); // ì„ íƒí•œê±´ ì²´í¬í‘œì‹œ ë‚˜ì˜¤ê²Œ
        strokeStyle = this.getAttribute('data-color'); // data-color ì†ì„±ê°’ìœ¼ë¡œ ì§€ì •í•œ ì„¹ìƒë³€ê²½
        isErasing = false;  // ì§€ìš°ê°œ ëª¨ë“œë¥¼ í•´ì œ
      });
    });

  ```


## 4ï¸âƒ£ ì„  êµµê¸°
  CSS
  ```css
    .controls {
      margin-bottom: 10px;
    }
  ```

  HTML
  ```html 
    <div class="controls">
        <label for="line-width">ì„  ë‘ê»˜: </label>
        <input type="range" id="line-width" min="1" max="10" value="1">
        <button id="eraser">ì§€ìš°ê°œ ì¼œê¸°</button>
    </div>
  ```

  Javascript
  ```javascript 
    // ìƒ‰ìƒ ê·¸ë¦¬ê¸° í•  ë•Œ ë‚˜ì˜¨ ì•„ë˜ì˜ í•¨ìˆ˜ì—ì„œ 
    function handleMouseMove(event) {
        // ... ë‚˜ë¨¸ì§€ ë™ì¼

        context.strokeStyle = strokeStyle;
        context.lineWidth = lineWidth; // ì§€ì •í•œ ì„  ë‘ê»˜

        // ... ë‚˜ë¨¸ì§€ ë™ì¼
    }

    // ì„  ë‘ê»˜ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    document.getElementById('line-width').addEventListener('input', function() {
      lineWidth = this.value;
    });

  ```


## 5ï¸âƒ£ ì§€ìš°ê°œ ë²„íŠ¼
  HTML
  ```html 
     <div class="controls">
        <label for="line-width">ì„  ë‘ê»˜: </label>
        <input type="range" id="line-width" min="1" max="10" value="1">
        <button id="eraser">ì§€ìš°ê°œ ì¼œê¸°</button>
    </div>
  ```

  Javascript
  ```javascript 
    // ìƒ‰ìƒ ê·¸ë¦¬ê¸° í•  ë•Œ ë‚˜ì˜¨ ì•„ë˜ì˜ í•¨ìˆ˜ì—ì„œ 
    function handleMouseMove(event) {
      // ... ë‚˜ë¨¸ì§€ ë™ì¼

      context.strokeStyle = strokeStyle;
      context.lineWidth = lineWidth; // ì§€ì •í•œ ì„  ë‘ê»˜

      if (isErasing) {
        context.globalCompositeOperation = 'destination-out'; // ê¸°ë³¸ ì„¤ì • ê°’, ì´ì „ì— ê·¸ë ¤ì§„ ì„ ìœ„ì— ë®ì–´ì§
      } else {
        context.globalCompositeOperation = 'source-over'; // ê¸°ì¡´ì— ìˆëŠ” ì„ ìœ„ì— ì„ ì„ ê·¸ë¦¬ë©´ ë§ˆìš°ìŠ¤ ì´ë™í•œ ë¶€ë¶„ë§Œí¼ íˆ¬ëª…í•˜ê²Œ ë§Œë“œëŠ” ì†ì„±
      }
      context.closePath(); // contextì˜ ê²½ë¡œë¥¼ ì¢…ë£Œ
      context.stroke(); // í™”ë©´ì— ì„  ê·¸ë¦¬ê¸° í•¨ìˆ˜

      // ... ë‚˜ë¨¸ì§€ ë™ì¼
    }

    // ì§€ìš°ê°œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    document.getElementById('eraser').addEventListener('click', function() {
      isErasing = !isErasing;  // ì§€ìš°ê°œ ëª¨ë“œë¥¼ í† ê¸€
      if (isErasing) {
          this.textContent = 'ì§€ìš°ê°œ ë„ê¸°';
          document.querySelectorAll('.color-button').forEach(btn => btn.classList.remove('selected'));  // ëª¨ë“  ìƒ‰ìƒ ë²„íŠ¼ ì„ íƒ í•´ì œ
      } else {
          this.textContent = 'ì§€ìš°ê°œ ì¼œê¸°';
      }
    });

  ```

<br><br>

### ğŸ¤“ ì „ì²´ ì½”ë“œ
  ``` html
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ìº”ë²„ìŠ¤ì— ë§ˆìš°ìŠ¤ë¡œ ê·¸ë¦¼ ê·¸ë¦¬ê¸°</title>
        <style>
            canvas {
                border: 1px solid #000;
            }

            .controls {
                margin-bottom: 10px;
            }

            .color-picker {
                display: flex;
                margin-bottom: 10px;
            }
            .color-button {
                position: relative;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                margin: 5px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .color-button span {
                display: none;
                color: white;
                font-size: 20px;
            }
            .color-button.selected span {
                display: block;
            }
            .black { background-color: black; color: white; }
            .red { background-color: red; }
            .orange { background-color: orange; }
            .yellow { background-color: yellow; }
            .green { background-color: green; }
            .blue { background-color: blue; }
            .indigo { background-color: indigo; }
            .violet { background-color: violet; }
        </style>
    </head>
    <body>
        <h1>ìº”ë²„ìŠ¤ì— ë§ˆìš°ìŠ¤ë¡œ ê·¸ë¦¼ ê·¸ë¦¬ê¸°</h1>
        <div class="controls">
            <label for="line-width">ì„  ë‘ê»˜: </label>
            <input type="range" id="line-width" min="1" max="10" value="1">
            <button id="eraser">ì§€ìš°ê°œ ì¼œê¸°</button>
        </div>
        <div class="color-picker">
            <div class="color-button black selected" data-color="black"><span>&#10003;</span></div>
            <div class="color-button red" data-color="red"><span>&#10003;</span></div>
            <div class="color-button orange" data-color="orange"><span>&#10003;</span></div>
            <div class="color-button yellow" data-color="yellow"><span>&#10003;</span></div>
            <div class="color-button green" data-color="green"><span>&#10003;</span></div>
            <div class="color-button blue" data-color="blue"><span>&#10003;</span></div>
            <div class="color-button indigo" data-color="indigo"><span>&#10003;</span></div>
            <div class="color-button violet" data-color="violet"><span>&#10003;</span></div>
        </div>
        <canvas id="canvas" width="500" height="500"></canvas>

        <script>
            var canvas = document.getElementById("canvas"); // canvas íƒœê·¸
            var context = canvas.getContext("2d"); // canvas íƒœê·¸ì˜ context

            var lastX = 0; // ë§ˆì§€ë§‰ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ x ê°’
            var lastY = 0; // ë§ˆì§€ë§‰ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ y ê°’
            var isDrawing = false; // ê·¸ë¦¬ê¸° ìƒíƒœ, false : ì•ˆê·¸ë¦¬ê¸°
            var strokeStyle = 'black';  // ê¸°ë³¸ ì„  ìƒ‰ìƒ
            var lineWidth = 1;  // ê¸°ë³¸ ì„  ë‘ê»˜
            var isErasing = false;  // ì§€ìš°ê°œ ëª¨ë“œ ì—¬ë¶€
            

            function handleMouseDown(event) {
                // ë§ˆìš°ìŠ¤ í´ë¦­í–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
                isDrawing = true;
                [lastX, lastY] = [event.offsetX, event.offsetY];
                // í˜„ì¬ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì¸ [event.offsetX, event.offsetY] ë¥¼ ê°ê° lastX, lastY ì— ì €ì¥
            }

            function handleMouseMove(event) {
                // ë§ˆìš°ìŠ¤ê°€ canvas íƒœê·¸ë‚´ì—ì„œ ì›€ì§ì˜€ì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜

                if (!isDrawing) return;  // isDrawingì´ falseì¼ ë•ŒëŠ” returnìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì¢…ë£Œ

                // ë§ˆìš°ìŠ¤ê°€ ì›€ì§ì¼ ë•Œ isDrawingì´ trueì´ë©´ í˜„ì¬ ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜´

                const currentX = event.offsetX;
                const currentY = event.offsetY;

                context.beginPath(); // contextì˜ ìƒˆë¡œìš´ ê²½ë¡œë¥¼ ì‹œì‘
                context.moveTo(lastX, lastY); // ë§ˆì§€ë§‰ ë§ˆìš°ìŠ¤ ìœ„ì¹˜
                context.lineTo(currentX, currentY); // moveToë¡œ ì§€ì •í•œ ì´ì „ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì—ì„œ í˜„ì¬ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ê¹Œì§€ ì„  ê·¸ë¦¬ê¸°
                context.strokeStyle = strokeStyle; // ì§€ì •í•œ ì„  ìƒ‰ìƒ
                context.lineWidth = lineWidth; // ì§€ì •í•œ ì„  ë‘ê»˜
                

                if (isErasing) {
                    context.globalCompositeOperation = 'destination-out'; // ê¸°ë³¸ ì„¤ì • ê°’, ì´ì „ì— ê·¸ë ¤ì§„ ì„ ìœ„ì— ë®ì–´ì§
                } else {
                    context.globalCompositeOperation = 'source-over'; // ê¸°ì¡´ì— ìˆëŠ” ì„ ìœ„ì— ì„ ì„ ê·¸ë¦¬ë©´ ë§ˆìš°ìŠ¤ ì´ë™í•œ ë¶€ë¶„ë§Œí¼ íˆ¬ëª…í•˜ê²Œ ë§Œë“œëŠ” ì†ì„±
                }
                context.closePath(); // contextì˜ ê²½ë¡œë¥¼ ì¢…ë£Œ
                context.stroke(); // í™”ë©´ì— ì„  ê·¸ë¦¬ê¸° í•¨ìˆ˜

                [lastX, lastY] = [currentX, currentY]; // í˜„ì¬ ìœ„ì¹˜ë¥¼ ì €ì¥
            }

            function handleMouseUp() {
                // ë§ˆìš°ìŠ¤ í´ë¦­ í•´ì œí–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
                isDrawing = false;
            }

            function handleMouseLeave() {
                // ë§ˆìš°ìŠ¤ê°€ canvas íƒœê·¸ë¥¼ ë²—ì–´ë‚¬ì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
                isDrawing = false;
            }

            // ìƒ‰ìƒ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.querySelectorAll('.color-button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.color-button').forEach(btn => btn.classList.remove('selected')); // ê¸°ì¡´ì— ì²´í¬ë˜ì—ˆë˜ ìƒ‰ìƒì€ í•´ì œ
                    this.classList.add('selected'); // ì„ íƒí•œê±´ ì²´í¬í‘œì‹œ ë‚˜ì˜¤ê²Œ
                    strokeStyle = this.getAttribute('data-color'); // data-color ì†ì„±ê°’ìœ¼ë¡œ ì§€ì •í•œ ì„¹ìƒë³€ê²½
                    isErasing = false;  // ì§€ìš°ê°œ ëª¨ë“œë¥¼ í•´ì œ
                });
            });

            // ì„  ë‘ê»˜ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('line-width').addEventListener('input', function() {
                lineWidth = this.value;
            });

            // ì§€ìš°ê°œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('eraser').addEventListener('click', function() {
                isErasing = !isErasing;  // ì§€ìš°ê°œ ëª¨ë“œë¥¼ í† ê¸€
                if (isErasing) {
                    this.textContent = 'ì§€ìš°ê°œ ë„ê¸°';
                    document.querySelectorAll('.color-button').forEach(btn => btn.classList.remove('selected'));  // ëª¨ë“  ìƒ‰ìƒ ë²„íŠ¼ ì„ íƒ í•´ì œ
                } else {
                    this.textContent = 'ì§€ìš°ê°œ ì¼œê¸°';
                }
            });


            canvas.addEventListener('mousedown', handleMouseDown);
            canvas.addEventListener('mousemove', handleMouseMove);
            canvas.addEventListener('mouseup', handleMouseUp);
            canvas.addEventListener('mouseleave', handleMouseLeave);



      
        </script>
    </body>
    </html>
  ```


<br><br>

### ğŸ§ ì˜¤ëŠ˜ì˜ ì†Œê°ì€?
ê·¸ë¦¼ ê·¸ë¦¬ëŠ” ê²ƒì„ ì²˜ìŒ í–ˆëŠ”ë° í”ŒëŸ¬í„°ë¡œ ì‘ì—… í• ë•Œ ë³´ë‹¤ ì¢€ ë” ìˆ˜ì›”í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‹¤ìŒì—ëŠ” ì‚¬ì§„ì„ ì¶”ê°€í•œ ìƒíƒœì—ì„œ ê·¸ë¦¼ì„ ê·¸ë¦¬ëŠ” ë¶€ë¶„ì„ ë„£ìœ¼ë ¤ê³  í•˜ëŠ”ë° ì‚¬ì§„ì´ ì–´ë ¤ìš¸ì§€... ê±±ì •ì´ì—ì—¬ã… ã… ğŸ¥º

<br>