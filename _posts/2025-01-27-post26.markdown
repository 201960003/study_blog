---
layout: post
title:  âŒœHTMLâŒŸ Web Speech APIë¡œ TTS ë° STT êµ¬í˜„í•˜ê¸°
date:   2025-01-26 +0900
categories: HTML
---

<!-- TTS ì„¹ì…˜ -->
<div class="container">
    <h2>Text-to-Speech (TTS)</h2>
    <textarea id="tts-text" rows="3" cols="50" placeholder="ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea><br>
    <button id="speak-button">ì½ê¸°</button>
</div>

<!-- STT ì„¹ì…˜ -->
<div class="container">
    <h2>Speech-to-Text (STT)</h2>
    <p id="status-message">ë§ˆì´í¬ ê¶Œí•œ ìƒíƒœ:
        <span id="permission-status">í™•ì¸ ì¤‘...</span>
    </p>
    <button id="start-record-button">ë…¹ìŒ ì‹œì‘</button>
    <button id="stop-record-button" disabled>ë…¹ìŒ ì¤‘ì§€</button>
    <p>ì¸ì‹ëœ í…ìŠ¤íŠ¸: <span id="recognized-text"></span></p>
</div>

<script>

    // TTS (Text-to-Speech)
    document.getElementById('speak-button').addEventListener('click', () => {
        const text = document.getElementById('tts-text').value;
        ttsRead(text);
    });


    function ttsRead(text) {
         const speech = new SpeechSynthesisUtterance(text);
        speech.lang = 'ko-KR'; // í•œêµ­ì–´ ì„¤ì •
        window.speechSynthesis.speak(speech);
    }

    // STT (Speech-to-Text)
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'ko-KR'; // í•œêµ­ì–´ ì„¤ì •
    recognition.interimResults = false;


    const startButton = document.getElementById('start-record-button');
    const stopButton = document.getElementById('stop-record-button');
    const recognizedText = document.getElementById('recognized-text');
    const permissionStatusSpan = document.getElementById('permission-status');


    startButton.addEventListener('click', () => {
        recognition.start();
        startButton.disabled = true;
        stopButton.disabled = false;
    });

    stopButton.addEventListener('click', () => {
        recognition.stop();
        startButton.disabled = false;
        stopButton.disabled = true;
    });

    recognition.addEventListener('result', (event) => {
        const transcript = event.results[0][0].transcript; // ì¸ì‹ëœ í…ìŠ¤íŠ¸
        recognizedText.textContent = transcript;
    });

    recognition.addEventListener('end', () => {
        startButton.disabled = false;
        stopButton.disabled = true;
        ttsRead(recognizedText.textContent);
    });

    // ë§ˆì´í¬ ê¶Œí•œ í™•ì¸ ë° ìƒíƒœ ì—…ë°ì´íŠ¸
    async function checkMicrophonePermission() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            if (stream) {
                updateUI('granted');
            }
        } catch (error) {
            updateUI('denied');
        }
    }

    // UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateUI(status) {
        if (status === 'granted') {
            permissionStatusSpan.textContent = 'í—ˆìš©ë¨';
            permissionStatusSpan.style.color = 'green';
            startButton.disabled = false;
            stopButton.disabled = true;
        } else if (status === 'denied') {
            permissionStatusSpan.textContent = 'ê±°ë¶€ë¨';
            permissionStatusSpan.style.color = 'red';
            startButton.disabled = true;
            stopButton.disabled = true;
        } else {
            permissionStatusSpan.textContent = 'ì•Œ ìˆ˜ ì—†ìŒ';
            permissionStatusSpan.style.color = 'orange';
            startButton.disabled = true;
            stopButton.disabled = true;
        }
    }

    // ê¶Œí•œ ë³€ê²½ ê°ì§€
    async function monitorPermissionChanges() {
        try {
            const permissionStatus = await navigator.permissions.query({ name: 'microphone' });
            updateUI(permissionStatus.state); // ì´ˆê¸° ìƒíƒœ ì„¤ì •

            // ê¶Œí•œ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            permissionStatus.onchange = () => {
                updateUI(permissionStatus.state);
            };
        } catch (error) {
            console.error('ê¶Œí•œ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', error);
            updateUI('unknown');
        }
    }

    // ìœˆë„ìš° ë¡œë“œ ì‹œ ì‹¤í–‰
    window.addEventListener('load', () => {
        checkMicrophonePermission(); // ê¶Œí•œ ì´ˆê¸° í™•ì¸
        monitorPermissionChanges(); // ê¶Œí•œ ë³€ê²½ ê°ì§€
    });
</script>


<br><br>

<!-- ### ğŸ§ ì˜¤ëŠ˜ì˜ ì†Œê°ì€? -->


<br>